<!DOCTYPE html>

<?php
	header("Access-Control-Allow-Origin: *");
?>
<html>

<head>

    <meta charset="utf-8">
    <meta http-equiv='cache-control' content='no-cache'>
    <meta http-equiv='expires' content='0'>
    <meta http-equiv='pragma' content='no-cache'>

    <title>SSR Augmented Reality demo</title>
    <script src="ext/xml3d.js"></script>
    <script src="ext/camera.js"></script>
    <script src="ext/gyronorm.complete.min.js"></script>
    <script src="ext/zxing.js"></script>
    
    <script src="js/util.js"></script>
    <script src="js/sensorfetch.js"></script>
    <script src="js/sensorviz.js"></script>
    <script src="js/device.js"></script>
    <script src="js/camera.js"></script>
    <script src="js/qr.js"></script>
    <script src="js/fullscreen.js"></script>
    <link rel="stylesheet" type="text/css" href="css/main.css">
    

</head>

<body style="background-color: rgba(0, 0, 0, 0.5)" id="body">
    <div id="camera-mode" style="width:100vw; height:100vh;">
        <div>
            Cameras:
            <select id="video-select">
            </select>
        </div>
        <video autoplay style="width: 100%; height:100%; position:absolute" id="video"></video>
        <div style="width:100%; height:100%; position:absolute" id="overlay">
            <div class="overlay-message" id="overlay">
            </div>
        </div>

        <p id="sensor" class="sensor-message">
            [[No sensor selected]]
        </p>
        <xml3d style="width: 100%; height:100%; opacity: 0.75;" id="x3d">
            <material id="orange" model="urn:xml3d:material:phong">
                <float3 name="diffuseColor" >1 0.5 0</float3>
                <float name="ambientIntensity" >0.5</float>
            </material>
            <defs id="defs">
                <data id="quadMesh">
                    <int name="index">0 1 2  1 2 3</int>
                    <float3 name="position">-1 -1 -5 1 -1 -5 -1 1 -5 1 1 -5</float3>
                    <!--<float3 name="normal">0 0 1  0 0 1  0 0 1 0 0 1</float3>-->
                    <float2 name="texcoord">0.0 0.0 1.0 0.0 0.0 1.0 1.0 1.0</float2>
                </data>
                <data id="defaultPhong"> 
                    <float3 name="diffuseColor">1.0 1.0 1.0</float3>
                    <float name="ambientIntensity">0.0</float>
                    <float3 name="emissiveColor">0 0 0</float3>
                    <float3 name="specularColor">0.025 0.025 0.025</float3>
                </data>
            </defs>

            <transform id="cameraTransform" translation="0 0 0"></transform>
            <view transform="#cameraTransform" id="view"></view>
            
            <light id="light1" model="urn:xml3d:light:directional" >
                <float3 name="intensity">1 1 1</float3>
            </light>
            <group id="scene" material="#orange">
            </group>
        </xml3d>
    </div>
    <div id="map-mode" style="width:100vw; height:100vh;">
        <p style="text-align: center">
            Use in portrait mode for camera!
        </p>
    </div>
    
    <script src="js/main.js"></script>
    <!-- hehe, load it here since it requires a function found in main.js -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA3ZqdMQakJ2fFVbuI1H8uqbPPl-R-GZls&callback=SetupGMap"></script>
</body>

</html>
