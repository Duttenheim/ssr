<!DOCTYPE html>

<?php
	header("Access-Control-Allow-Origin: *");
?>
<html>

<head>

    <meta charset="utf-8">
    <meta http-equiv='cache-control' content='no-cache'>
    <meta http-equiv='expires' content='0'>
    <meta http-equiv='pragma' content='no-cache'>

    <title>SSR Augmented Reality demo</title>
    <script src="ext/xml3d.js"></script>
    <script src="ext/camera.js"></script>
    <script src="ext/gyronorm.complete.min.js"></script>
    <script src="ext/zxing.js"></script>
    
    <script src="js/util.js"></script>
    <script src="js/sensorfetch.js"></script>
    <script src="js/sensorviz.js"></script>
    <script src="js/device.js"></script>
    <script src="js/camera.js"></script>
    <script src="js/qr.js"></script>

    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA3ZqdMQakJ2fFVbuI1H8uqbPPl-R-GZls&callback=SetupGMap"></script>
    <link rel="stylesheet" href="css/main.css" />
    

</head>

<body style="background-color: rgba(0, 0, 0, 0.5)" id="body">
    <div id="camera-mode" style="width:100vw; height:100vh;">
        <div>
            Cameras:
            <select id="video-select">
            </select>
        </div>
        <video autoplay style="width: 100%; height:100%" id="video"></video>
        <!--<canvas id="video-canvas" style="position:absolute; width:100%; height:100%"></canvas>-->
        <p id="sensor" style="position:absolute; color:white">
        </p>

        <xml3d style="width: 100%; height:100%; opacity: 0.75" id="x3d">
            <material id="orange" model="urn:xml3d:material:phong">
                <float3 name="diffuseColor" >1 0.5 0</float3>
                <float name="ambientIntensity" >0.5</float>
            </material>

            <!--
            <data id="deviceCameraTransform">
                <float4x4 name="transform">1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1</float4x4>
            </data>
            -->

            <transform id="cameraTransform" translation="0 0 0"></transform>
            <view transform="#cameraTransform" id="view"></view>
            
            <light id="light1" model="urn:xml3d:light:directional" >
                <float3 name="intensity" >1 1 1</float3>
            </light>
            <group id="scene" material="#orange">
            </group>
        </xml3d>
        <p id="debug">
        </p>
    </div>
    <div id="map-mode" style="width:100vw; height:100vh;">
        <p style="text-align: center">
            Use in portrait mode for camera!
        </p>
    </div>
    
    <script src="js/main.js"></script>
</body>

</html>
